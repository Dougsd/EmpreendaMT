<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Login</title>
        <link rel="stylesheet" href="../css/login.css">
        <script  src="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js"></script>
        <script  src="https://www.gstatic.com/firebasejs/8.6.3/firebase-auth.js"></script>
        <script  src="https://www.gstatic.com/firebasejs/8.6.3/firebase-database.js"></script>
        <script  src="https://www.gstatic.com/firebasejs/8.6.3/firebase-storage.js"></script>

    </head>

    <body>
        <script>
              var firebaseConfig = {
                        apiKey: "AIzaSyDIOYvBWIKB554i91NzZYeMm8IJxYiYJvc",
                        authDomain: "empreendamt-ba0dc.firebaseapp.com",
                        projectId: "empreendamt-ba0dc",
                        storageBucket: "empreendamt-ba0dc.appspot.com",
                        messagingSenderId: "220016695651",
                        appId: "1:220016695651:web:f50968d4a5b256cefc5b56",
                        measurementId: "G-Z5VDJM5T9B"
                };
                
                firebase.initializeApp(firebaseConfig);
                function acess (){
                    var email = document.getElementById("mail");
                    var senha = document.getElementById("pass");
                    if (email.value !="" && senha.value !="" ){
                        firebase.auth().signInWithEmailAndPassword(email.value, senha.value)
                        .then((userCredential) => {
                        // Signed in
                            var user = userCredential.user;
                            if (user != null) {
                                console.log("Logou crll");
                                window.location.href = "http://localhost:8080/application/app.html";
                            }
                        // ...
                         })
                        .catch((error) => {
                            var errorCode = error.code;
                            var errorMessage = error.message;
                            if (errorCode === 'auth/wrong-password') {
                                window.location.href = "http://localhost:8080/application/login.html";
                                alert('Wrong password.');
                             } 
                             else {
                                    alert(errorMessage);
                               }
                        console.log(error);  
                        });

                        
                    }
                    else{
                    window.alert("Erro ao logar, Preencha os campos Email e Senha corretamente.");
                    }
                }
        </script>
        
        <form class="form" action="">
            <div class="card">
                <div class="card-top">
                    <h2 class="title">EmpreendaMT</h2>
                    <img class="imglogin" src="../img/user.png" alt="">  
                </div>
                
                <div class="card-group">
                    <label>Email</label>
                    <input type="text" name="email" placeholder="Digite seu email" id="mail" value="">
                </div>

                <div class="card-group">
                    <label>Senha</label>
                    <input type="password" name="senha" placeholder="Digite sua Senha" id="pass" value="">
                </div>

                <div class="card-group">
                    <label><input type="checkbox"> Lembre-me</label>
                </div>

                <div class="card-group btn">
                    <button type="button" id="btn-login" onclick="acess()">Acessar ambiente de gest√£o</button>
                </div>
                <div class="card-group btn2">
                    <button type="button"> <a href="cadastrar.html">Cadastrar</a></button>
                </div>
            </div>
        </form>
    </body>
</html>



